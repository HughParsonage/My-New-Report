\documentclass[a4paper,11pt]{scrartcl}\usepackage[]{graphicx}\usepackage[]{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usepackage{makeidx}
  \makeindex
\usepackage{booktabs}
\usepackage{float}
\usepackage[left=3cm, right=5cm]{geometry}
\usepackage[scale=1.1]{ebgaramond}
\usepackage{microtype}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{tabularx}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{longtable}
\definecolor{Orange}{HTML}{F68B33}
\definecolor{DarkOrange}{HTML}{D4582A}
\usepackage{bold-extra}
\lstset{
language=[LaTeX]TeX,
basicstyle=\ttfamily,
commentstyle=\ttfamily,
texcsstyle=*\color{blue},
moretexcs={setlength,chapter,subsection,subsubsection,appendix,addbibresource,FloatBarrier,contentspage,units},
columns=flexible,
breaklines=true,
backgroundcolor=\color{black!5},
moredelim = [is][\slshape\color{violet}]{@@}{@@},
classoffset=1,
morekeywords={grattan}, keywordstyle = \color{Orange}\bfseries, 
classoffset=0
}
\usepackage{fancyvrb}
\newcommand{\nverb}[1]{
\begin{Verbatim}
 #1
\end{Verbatim}

}


\usepackage{upquote}  % for ``
\usepackage[justification=justified, singlelinecheck=false, position=above]{caption}
\captionsetup[table]{belowskip=5pt}

\usepackage{titlesec}     % for customizing sections
% customize section
\titleformat{\section}%
  {\Large\sffamily\bfseries}% format
  {\makebox[0pt][r]{\thesection\hspace{12pt}}}% label
  {0pt}% horizontal sep
  {}% title
\titleformat{\subsection}%
  {\large\sffamily\bfseries}% format
  {\makebox[0pt][r]{\thesubsection\hspace{12pt}}}% label
  {0pt}% horizontal sep
  {}% title
\titleformat{\subsubsection}%
  {\sffamily\bfseries}% format
  {\makebox[0pt][r]{\thesubsubsection\hspace{12pt}}}% label
  {0pt}% horizontal sep
  {}% title


\usepackage[colorlinks, urlcolor=blue, linkcolor=blue]{hyperref}

\title{{\textrm{Using \LaTeX\ in reports at Grattan}}}
\author{Hugh Parsonage}

\newcommand{\defi}[1]{\textbf{\textsf{#1}}}
\newcommand{\ie}{\emph{i.e.}}
\newcommand{\eg}{\emph{e.g.}}

% From scrartcl.cls lines 3687--3701
\makeatletter
\newcommand\addsubsec{\SecDef\@addsubsec\@saddsubsec}
\newcommand*{\@addsubsec}{}
\def\@addsubsec[#1]#2{%
  \edef\reserved@aa{%
    \unexpanded{%
      \subsection[{#1}]{#2}%
      \c@secnumdepth=
    }\the\c@secnumdepth\relax
  }%
  \c@secnumdepth=\numexpr \subsectionnumdepth-1\relax
  \reserved@aa
}
\newcommand*{\@saddsubsec}[1]{%
  \subsection*{#1}\addsubsecmark{}%
}
\makeatother

% Page break every section
\let\oldsection\section
\renewcommand\section{\clearpage\oldsection}
\let\oldpart\part
\renewcommand\part{\clearpage\oldpart}



\usepackage{realboxes}
\usepackage{manfnt}

\def\smallstrut{\relax\ifmmode\copy\smallstrutbox\else\unhcopy\strutbox\fi}
\makeatletter
\setbox\strutbox\hbox{%
  \vrule\@height0.5ex % orig .7
        \@depth0\baselineskip
        \@width\z@}%
\makeatother

\newcommand{\code}[1]{\fcolorbox{gray!10}{gray!10}{\smallstrut\texttt{#1}}}
\newcommand{\Code}[1]{\Colorbox{gray!10}{\lstinline!#1!}}
\newcommand{\Codee}[1]{\Colorbox{gray!10}{#1}}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}
\maketitle
\tableofcontents
\newpage
% \subsection*{Interpreting code examples}
% \addcontentsline{toc}{subsection}{Interpreting code examples}
\addsubsec{Interpreting code examples}
Example code are written using a listing:
\begin{lstlisting}
LaTeX code with some \markup.  
\begin{environment}

\end{environment}
\end{lstlisting}
or inline: \lstinline!\TeX{}!.

Code examples can be, for want of better terms, \emph{complete} or \emph{illustrative}. \defi{Complete} code means the code should be copied-and-pasted directly into the input file without modification, whereas \defi{illustrative} code should be modified based on the desired output. For example, if an author wishes to increase the gap between columns in the overview by 2\,mm, the code excerpt below is complete. The author should copy and paste the following, placing it before \lstinline!\begin{overview}!:
\begin{lstlisting}
\newlength{\overviewextra}
\setlength{\overviewextra}{2mm}
\addtolength{\columnsep}{\overviewextra}
\end{lstlisting}
Whereas in an illustrative version of the above, the author is offered a choice for the gap between columns. In illustrative code examples, such options are coloured violet, slanted, and delimited with chevrons:
\begin{lstlisting}
\newlength{\overviewextra}
\setlength{\overviewextra}{@@<extra column width>@@}
\addtolength{\columnsep}{\overviewextra}
\end{lstlisting}


Text coloured blue is simply syntax highlighting and has no special meaning. All \TeX{} documents are written in plain text (although your text editor/\textsc{IDE} may offer or display similar syntax highlighting). 

\newpage
 \section{Some principles for erstwhile MS Word users}
 Learning \LaTeX{} as an MS Word user is a frustrating, confusing, rewarding, and ecstatic experience.  There are some principles that are inviolate for novices.
 \begin{enumerate}
  \item Don't worry about the appearance of your document as your write. Write what you mean. MS Word is a What You See Is What You Get editor. \LaTeX\ is a What You See Is What You \emph{Mean}.
  \item \LaTeX\ takes an author's input and sets out the document's appearance using the author's raw input, the author's advice about how the document should look, and a set of parameters and algorithms that govern tradeoffs concerning document appearance. 
  \item The \verb=grattan.cls= template is designed so that authors do not have to make any layout or typographic decisions.
  \item \LaTeX\ is a butler, not a robot. It may not do exactly as you say, but it will do what you mean. When it doesn't, it either means 
  \begin{itemize}
   \item You given it a nonsensical instruction
   \item Your instruction contradicts another instruction
   \item Your instruction contravenes good typographic design, as it sees fit
  \end{itemize}

  \item \LaTeX\ is a butler, not a slave: it is a partner in document preparation. In general, your responsibilities should not overlap: you decide the content and it decides the form. Where your responsibilities do overlap, you should seek to \emph{advise} \LaTeX, not to \emph{order} it. Further, you should be as gentle as possible with your advice. Only forcefully advise when the document will not require amendments and you are sure \LaTeX\ is wrong. 
  \item \LaTeX\ is a computer program, not a human. Despite the previous points, there are limits to what \LaTeX\ can do. In particular, \LaTeX\ cannot reword paragraphs.
  \item Don't manually position figures, tables, or boxes. Let them float in the document. It is nearly certain that the initial placement will be odd. As long you have used a \verb=figure=, \verb=table= or \verb=*box= environment, they will float into good positions. For errant figures, tables, or boxes, wait until the document is completely finished before advising positions.
  \item Don't do any of the following:
  \begin{enumerate}
   \item Insert horizontal or vertical whitespace, including manual line-breaks (except in tables)
   \item page- or column-breaking
  \end{enumerate}
  \item Do not ignore errors (\emph{i.e.}~things that prevent compilation). Any errors which you can't resolve in less than 60 seconds should be referred to Cameron Chisholm or Hugh Parsonage. Preferably attach what you think caused the error.
  \item Take note of warnings from time to time. Warnings relating to bibliographies should be fixed immediately. Other warnings are typically just hints that manual intervention may improve the layout -- resolving them can be deferred.

  \item Beware special characters. 
  \begin{table}[h]
   \centering
   \begin{tabular}{ll}
   \toprule
   \textbf{When you want this \dots} & \textbf{\dots type this.} \\
   \midrule
   %
   \$ & \verb=\$= \\
   \% & \verb=\%= \\
   `` & \verb=``= (button above \verb=Tab=) \\
   '' & \verb=''= \\
   -- (en-dash) & \verb=--=  \\
   --- (em-dash) & \verb=---=  \\
   \bottomrule   
  \end{tabular}
  \end{table}

  


  \item The grattan class file assumes your input is encoded in \texttt{UTF-8}. Avoid copying from MS Word to \verb=.tex= files. Otherwise, special characters above will creep in silently. If you must, use \verb=pandoc=.
  \item Use \verb= % = for comments.
 \end{enumerate}
 \section{Basics of \textrm{\LaTeX}}
 \subsection{Compilation}
 The process of \LaTeX\ is basically:
 \begin{enumerate}
  \item Start with a plain text file with the file extension \verb=.tex= in a directory/folder
  \item Run the \verb=pdflatex= program on that file. That is, type 
  \begin{lstlisting}[language=bash]
    cd path/to/your/directory
  \end{lstlisting}
  and then 
  \begin{lstlisting}
    pdflatex myfile.tex
  \end{lstlisting}
  in cmd (Windows) or Terminal (Linux or Mac).
  \item The program puts a pdf file \lstinline!myfile.pdf! or returns an error.
 \end{enumerate}

 
 \subsection{Commands and environments}
 \subsubsection{Commands}
 A \defi{command} starts with a backslash \verb=\= followed by one or more characters. A {command} may have zero or more mandatory arguments and zero or more optional arguments. For example:
 \begin{table}[H]
 \raggedright
 \renewcommand{\arraystretch}{1.4}
 \newlength{\tabularxlength}
 \setlength{\tabularxlength}{\linewidth}
 \addtolength{\tabularxlength}{0.5\paperwidth}
 \addtolength{\tabularxlength}{-0.5\linewidth}
 \caption{Examples of commands and their arguments}
  \makebox[\textwidth][l]{%
  \begin{tabularx}{\tabularxlength}{lp{2.5cm}X}
    \toprule
    \textbf{\textsf{Command}} & \textbf{\textsf{Arguments}} & \textbf{\textsf{Description}} \\ 
    \midrule
    \verb=\$= & 0 mandatory\newline 0 optional & \textbf{Prints} the \$\ sign\\
    \verb=\textbf= & 1 mandatory\newline 0 optional & Prints its argument in boldface. \\
    \verb=\\= & 0 mandatory\newline 1 optional & Forces a line break, with optional extra space \\
    \verb=\footcite= & 1 mandatory\newline 2 optional & Cites its mandatory argument, with optional pre- or post-notes (such as page numbers) \\
    \verb=\footcites= & $n$ mandatory\newline $2n + 2$ optional & Multiple footcites \\
    \bottomrule
  \end{tabularx}
  }
 \end{table}
 \clearpage
 \subsubsection{Environments}
 An \defi{environment} looks like
\begin{lstlisting}
  \begin{environment}
   ...
  \end{environment}
\end{lstlisting}
It may have mandatory or optional arguments, which occur immediately after \verb=\begin{environment}=.  

 \begin{table}[h]
 \raggedright
 \renewcommand{\arraystretch}{1.4}
 \setlength{\tabularxlength}{\linewidth}
 \addtolength{\tabularxlength}{0.5\paperwidth}
 \addtolength{\tabularxlength}{-0.5\linewidth}
 \caption{Examples of environments}
  \makebox[\textwidth][l]{%
  \begin{tabularx}{\tabularxlength}{lp{2.5cm}X}
    \toprule
    \textbf{\textsf{Environment}} & \textbf{\textsf{Arguments}} & \textbf{\textsf{Description}} \\ 
    \midrule
    \verb=document= & none & The contents of the document. \\
    \verb=figure= & 1 optional & Creates a section of a document which ``floats'' above the body of the text. Captions and cross-reference labels within a \verb=figure= environment will refer to the figure. The optional argument restricts the placement of the figure on the page. \\ 
    %
    \verb=quote= & none & Used to designate a long quote with additional margin. \\
    %
    \verb=smallbox= & 2 mandatory, 1 optional & Creates a box, limited to one column. The first argument is optional and specifies the position of the box. The second argument is mandatory and specifies the title of the box, the third argument is also mandatory and specifies the cross-reference label of the box. \\ 
    \bottomrule
  \end{tabularx}
  }
  \end{table}
  %
  \section{Writing a report}
  \subsection{The preamble}
  The \defi{preamble} is everything outside the \verb=document= environment. (\ie~everything after \verb=\begin{document}=. 
  
  In every \LaTeX\ document, you must have 
  \begin{enumerate}
   \item The \emph{command} \verb=\documentclass= and a valid document class. In our case, use 
   \begin{lstlisting}
\documentclass{grattan}
   \end{lstlisting}
   \item A \verb=document= environment.
  \end{enumerate}
  That is, every \LaTeX\ document must have the following three lines.
  \begin{lstlisting}
\documentclass{@@<style>@@}
  
\begin{document}
  
\end{document}
  \end{lstlisting}
  \subsubsection{Grattan-specific preamble}
  The \verb=grattan= package will not compile without additional lines of code. Your preamble must have the following lines.
  \begin{lstlisting}
   \documentclass{grattan}
   
   \title{@@<Title of the report>@@}
   \author{@@<Authors>@@}

   \GrattanReportNumber{@@<number>@@} %% or \GrattanWorkingPaperNumber
   
   \addbibresource{bibliography.bib}
  \end{lstlisting}
  \subsubsection{Other requirements}
  The \verb=.tex= file must be in a directory containing:
  \begin{enumerate}
   \item The \verb=grattan.cls= file, which creates the document according to the Grattan template.
   \item The \verb=bibliography.bib= file, containing your bibliography database.
   \item The folder \verb=FrontPage= which must contain:
   \begin{enumerate}
    \item A file \verb=FrontPagePicture=
   \end{enumerate}
   \item The following files:
    \begin{verbatim}
    aus-gov-logo-stacked-black.pdf
    Bhp.pdf
    GrattanSVGLogo.pdf
    TMF_logo_green-eps-converted-to.pdf
    TMF_logo_green.pdf
    UOM-Pos_S_PMS.pdf
    Vic_Gov_Logo-2016.pdf
    \end{verbatim}


  \end{enumerate}



  
  \subsection{Frontmatter}
  \subsubsection{Overview / Summary / Preface}
  Use \index{overview}
  \begin{lstlisting}
   \begin{overview}[-35pt]
    ...
   \end{overview}
  \end{lstlisting}
  for your overview. The \lstinline![-35pt]! is a fudge factor that adjusts the position of the title to vertically balance the overview on the page. It may be abolished in future versions. 
  
  You can also use \lstinline!\begin{summary}! as required. If you want to change the name of the frontmatter, ask us --- it is straight-forward to amend.

  \subsubsection{Contents page(s)}
  Write \index{contentspage}
  \begin{lstlisting}
   \contentspage
  \end{lstlisting}
  After the \lstinline!overview! environment. This produces a list of figures and a list of boxes. If you don't want some of these lists, again, ask us --- it is straight-forward to omit, but it is a matter for the class file maintainer.
  
  \subsection{Body text}
  \subsubsection{Sectioning}
  To start a new chapter, write \index{chapter} \index{section}
  \begin{lstlisting}
   \chapter{<chapter title>}
  \end{lstlisting}
  Similarly, 
  \begin{lstlisting}
   \section{<section title>}
   \subsection{<subsection title>}
   \subsubsection{<subsubsection title>}
  \end{lstlisting}
  Title commands increment as expected, except for \lstinline!\subsubsection! which has no counter.
  
  To start an appendix, type \fcolorbox{gray!10}{gray!10}{\lstinline!\\appendix!}.

  \begin{lstlisting}
   \appendix
  \end{lstlisting}

  to mark the end of the main matter and the start of the appendices. Then use \lstinline!\chapter{@@<appendix title>@@}! to title the appendices.
  
  For example:
  \begin{lstlisting}
  \documentclass{grattan}
  
  \title{Brief report}
  \author{Me}
  
  \begin{document}
  
  \begin{overview}
  In this report, we found all is well.
  \end{overview}
  \contentspage
  \chapter{Australia is fine}
  Australia is fine.
  \section{How do we know this}
  Grattan analysis of ABS (2016).
  \subsection{Limitations of analysis}
  Our analysis is wrong.
  
  \chapter{Options for reform}
  Tidy desk.
  \appendix
  \chapter{International comparisons}
  \end{document}
  \end{lstlisting}
  
  \subsection{Boldface, italics}
  In general, you should write what you \emph{mean}, not what you want displayed. So avoid directly instructing \LaTeX\ to bold or italicize test. Instead, write macros explaining \emph{why} you are using a different font.
  
  That said, you can use \lstinline!\textbf{@@<text>@@}! to make \lstinline!@@text@@! boldface and \lstinline!\textit{@@<text>@@}! to make \lstinline!@@<text>@@! italic. You can also use \lstinline!\emph! to \emph{emphasize} text. 
  
  \subsection{Paragraphs}
  Use a blank line to mark a new paragraph. Thus
  \begin{center}
  \begin{minipage}{\textwidth}
  \begin{lstlisting}
   A well-designed GST reform package could support economic growth, make the tax and transfer system more progressive and give state and Commonwealth governments more budgetary options.

   Proposals to extend or broaden Australia's 10 per cent goods and services tax (GST) have been perennial. Current governments face many challenges, such as funding growing healthcare costs, reducing deficits, and cutting inefficient taxes. A higher GST could fund any of these initiatives -- although perhaps not all of them. 
  \end{lstlisting}
  \end{minipage}
  \end{center}

  
  \subsection{Numbered / bulleted lists}
  Use \verb=enumerate= and \verb=itemize= \index{enumerate}\index{itemize}
  \begin{lstlisting}
   \begin{enumerate}
    \item First numbered item
    \item Second numbered item 
    \begin{enumerate}
     \item First item in a nested list
    \end{enumerate}
    \item Third numbered item
   \end{enumerate}

   \begin{itemize}
     \item First bulleted item 
     \item Second bulleted item 
     \begin{itemize}
      \item First nested bulleted item.
     \end{itemize}
   \end{itemize}
  \end{lstlisting}

  
  \subsection{Floats}
  \subsubsection{Figures}
  Before you insert a figure, you need to create your image. This can either be done directly through a scripting language (like R or python), through \LaTeX\ directly (as through Ti\textit{k}Z), or through an external program. Your file should be a pdf, though almost all image types are supported. If you are going through an external program, ensure the file is moved to the atlas directory of your report. This directory should be placed in the same directory as your \verb=.tex= file. The directory should be called something evocative, like \verb=figure=, as it is in this manual.
  
  Once the image is ready, use the following structure to insert a figure.
  \begin{lstlisting}
   \begin{figure}
    \caption{@@<main caption>@@\label{@@<cross-reference key>@@}}%
    \units{@@<secondary caption/y-axis label>@@}
    \includegraphics{figure/@@image-filename@@}
    \noteswithsource{@@<Notes of the chart>@@}%  
    {@@<Source information>@@}
   \end{figure}
  \end{lstlisting}

  \makebox[\textwidth]{\begin{tabular}{cc}
XX & \includegraphics[width=0.5\textwidth]{figure/budget-repair-Figure8-altered-1.pdf}
  \end{tabular}
  }
  
  \subsubsection{Tables}
  Tables are tricky in \LaTeX. Use the \verb=tabularx= environment for a table with a specific width. Let \lstinline!\columnwidth! be the table's width.
  
  \begin{lstlisting}
   \begin{tabularx}{\columnwidth}{@@<alignment parameters>@@}
    \toprule
    Header1 & Header2 & Header3 \\
    \midrule 
    First row & First row & First row \\
    Second row & Second row & Second row \\
    ...
    Last row & Last row & Last row
    \bottomrule
   \end{tabularx}
  \end{lstlisting}
  The \lstinline!@@<alignment parameters>! determine the alignment of the columns, \verb=l= for left-aligned, \verb=c= for centre-aligned, \verb=r= for right-aligned. Others are available. Use the double-backslash \verb=\\= to move to the next row and the ampersand \verb=&= to move to the next column. Use \verb=\toprule= before the first row, \verb=\bottomrule= after the last row, and \verb=\midrule= to separate the headers from the rest of the table.

  \subsection*{More advanced} 
  \begin{table}[H]
  \centering
  %\makebox[\textwidth]{%
  \begin{tabular}{rp{9.5cm}}
  \toprule
  \lstinline!\cmidrule(lr){@@<m-n>@@}! & to denote a horizontal rule between the $m$th and $n$th columns. The \verb=(lr)= specifies that the horizontal rule should stop just short of the edges of the columns, to ensure adjacent \verb=\cmidrule=s have a visual breath between them. \\[5pt]
  \lstinline!\multicolumn{@@<n>@@}{@@<al.>@@}{@@<text>@@}! & Puts the \lstinline!@@<text>@@! in a `merged' cell from the current cell across \lstinline!@@<n>@@! columns with horizontal alignment \lstinline!@@<al.>@@! \\
  \bottomrule
  \end{tabular}%
  %}%
  \end{table}

  
  \begin{lstlisting}
    \newcommand{\tblHead}[2][c]{\bfseries\begin{tabular}[#1]{@{}l@{}}#2\end{tabular}}
    \newcommand{\tblHeadR}[2][c]{\bfseries\begin{tabular}[#1]{@{}>{\raggedleft}p{\linewidth}@{}}#2\end{tabular}}
    
    \begin{table}
    \caption{Budgetary impact of income tax rate changes}\label{tbl:tax_cuts}
    \begin{tabularx}{\columnwidth}{lr>{\raggedleft\arraybackslash}X}
    \toprule
    \tblHead{Tax bracket} & \tblHead{Current tax rate} & \tblHeadR{Budgetary impact of 1 percentage point change (2015-16)}\\
    \midrule
    \$0-\$18,200 & 0\% & \\
    \$18,201 - \$37,000 & 19\% & \$1.9\\
    \$37,001 - \$80,000 & 32.5\% & \$2.3\\
    \$80,001 - \$180,000& 37\% & \$1.3\\
    \$180,001 + & 45\% & \$0.7\\
    \bottomrule
    \end{tabularx}

    \notes{Excludes Temporary Budget Repair Levy (2\%\ for those earning over \$180,000 until 2016-17)}

    \source{Grattan analysis ATO 2\%\ sample file (2013). See \url{https://grattan.shinyapps.io/Changing_income_taxes/Forty_three_app.Rmd}}
    \end{table}
  \end{lstlisting}
  \subsection{Boxes}
  \subsubsection{smallbox}\index{smallbox}\index{boxes!smallbox}
  Use \verb=\begin{smallbox}= to insert a box intended to fit on one column. There are two mandatory arguments. 

  \begin{lstlisting}
   \begin{smallbox}{@@<title of the box>@@}{box:@@<cross-ref key>@@}
    @@<contents of the box>@@
   \end{smallbox}

  \end{lstlisting}
  
  \subsubsection{bigbox*} \index{bigbox*}\index{boxes!bigbox*}
  Use \verb=\begin{bigbox*}= to denote a big box.\footnote{The \texttt{*} reflects a convention in \LaTeX\ for a two-column float in an environment name.} The text will flow around the box. 

  When you have a figure in a big box, you must use 
  \begin{lstlisting}
   \begin{figure}[H] 
    ...
   \end{figure}
  \end{lstlisting}
  to insert a figure.
  
  Note the \lstinline![H]! which specifies that the figure is to be placed here (or rather, \emph{HERE!}). 
  
  \subsection{Cross-references}
  There are three commands used in cross-referencing: \lstinline!\label!, \lstinline!Vref! and \lstinline!Cref!. \index{Vref}\index{Cref}\index{cross-references}\index{label}
  The first designates the target of a cross-reference; the other two are for making a cross-reference to such a target. 

  For example, to refer to some figure

  \begin{lstlisting}
  Some text which is illustrated by a chart (\Vref{fig:key}) 

  \begin{figure}
    \caption{The chart's caption\label{fig:key}}
    \includegraphics{thechartfilename.pdf}
  \end{figure}
  \end{lstlisting}



  \subsection{Footnotes and referencing}
  Use the command \verb=\footnote= to mark a footnote. Use \verb=\textcite= within a footnote.
  
  \subsubsection{\texttt{bibliography.bib}}
  The \texttt{bibliography.bib} file is a plain text containing the bibliography databases. The database contains several lines for each entry:
  \begin{lstlisting}
   @type{<key>,
    author={<author name>},
    title={<title>},
    year={<year>}
   }
  \end{lstlisting}
  There are several elements to a bibliography:
  \begin{enumerate}
   \item[\texttt{@type}] This specifies the type of reference, such as an article, report, book.
   \item[\texttt{<key>}] This is a string of text or numbers (no spaces or special characters) which represent the \emph{key} which is referenced in the text (as I will show below).
   \item[\texttt{author=<author name>}] each of these lines designate the fields of the reference %
   
  \end{enumerate}
  
  \subsubsection{Citations}
  Use \lstinline!\footcite{@@<key>@@}! to cite an entry in the database. The citation will appear in a footnote. Use \lstinline!\footcites{@@<key1>@@}{@@<key2>@@}! to cite multiple entries in the same footnote.
  
  Use \lstinline!\footcite[][18--24]{@@<key>@@}! to add a page reference (in this case, pages 18--24) as a postnote the citation. Use \lstinline!\footcites{key1}[][44]{key2}! to cite \lstinline!key1! and page~44 from \lstinline!key2!.
  
  Use \lstinline!\textcite{<key>}! to cite a key if you don't want in a footnote. Similarly \verb=\textcites= and \verb=\textcite[][18--24]{key}= as with footcite. 
  
  \section{More advanced macros}
  \subsection{New commands}
  Use \lstinline!\newcommand! to create a new command. 
  \begin{lstlisting}
   \newcommand{@@<command name>@@}{@@<what the command does>@@}
   \newcommand{@@<command name>@@}[@@<number of arguments>@@]{@@<what the command does as a function of #>@@}
  \end{lstlisting}
  For example,
  \begin{lstlisting}
   \newcommand{\eg}{\emph{e.g.}}
  \end{lstlisting}
  Creates a new command \verb=\eg= which prints \emph{e.g.} when it is called. Another one I often use is:
  \begin{lstlisting}
   \newcommand{\gao}{Grattan analysis of}
  \end{lstlisting}
  Slightly more advanced is
  \begin{lstlisting}
   \newcommand{\defi}[1]{\textbf{#1}\index{#1}}
  \end{lstlisting}
  This makes the argument of \verb=\defi= bold and places it in the index. 
  
  \section{Compiling a final document}
  \subsection{Citations and references}
  \begin{enumerate}
    \item If your file is called \lstinline!YourReport.tex!
    \begin{lstlisting}
    texify --pdf --clean YourReport.tex
    \end{lstlisting}
    \item Update bibliography
    \begin{lstlisting}
    biber YourReport
    \end{lstlisting}
    Note that you should not provide the extension for \lstinline!biber!.
    \item Re-run:
    \begin{lstlisting}
    texify --pdf --clean YourReport.tex
    \end{lstlisting}
  \end{enumerate}

  \section{Common mistakes made by novices}
  \begin{enumerate}
    \item Not regularly compiling your document.
    \item Not fixing errors revealed through compilation.
    \item Not checking citations have been correctly rendered:
    \begin{enumerate}
      \item Making sure you've hit the right reference.
      \item Making sure the references have been entered correctly. 
    \end{enumerate}
    \item Using \Code{Figure \\Vref} instead of just \Code{\\Vref}.
    \item Putting \Code{\\label} in the wrong position. (It should be immediately after the counter is updated.)
    \item Manually specifying figure position, column breaks, white space.
    \item Using \Code{\\footcite} instead of \Code{\\textcite}:
    \begin{enumerate}
      \item In notes and sources or
      \item In footnotes themselves. 
    \end{enumerate}
    \item Using \Code{\\textcite\{blah\} and \\textcite\{foo\}} instead of \Code{\\textcites\{blah\}\{foo\}}.
  \end{enumerate}


  \section{Known bugs in the \texttt{grattan.cls} file}
  \subsection{Big boxes}
  \subsubsection{Caption baseline does not match matching column baseline}
  Solved: \url{http://tex.stackexchange.com/questions/305450/align-caption-baseline-in-second-column-with-baseline-of-first-column}
  \subsection{Footnotes in big boxes extend across the entire page}
  
  
  \section{pdflink errors}
  Use \lstinline!\nocite{*}! and delete all auxiliary files to escape the error.
  \part{Notes for the typesetter}
  \section{Moving floats}
  \begin{enumerate}
  \item If the author would prefer a float  (figure, table, or box) to be placed in a different location in the document, you as the typesetter must first understand why the output routine has placed the figure where it has. 
  \item If it is clear that the output routine has averted a substantial typographic sin by placing the figure there, the author should be told of this.
  \item Otherwise, the first step is to move the errant float forward or backward one or two paragraphs as required, noting that the order in which floats of the same type (\eg~figure) occur in the source file is preserved in the final document.
  \item Next consider, in the following order:
  \begin{enumerate} 
  \item providing the options \lstinline![htb]! as required to the float environment
  \item providing the same options to the errant float's predecessor
  \item providing the same options to both the errant float and its predecessor
  \end{enumerate}
  \item At this point, if the figure remains steadfast, you have encountered a very unusual situation, and I would encourage you to accept the result.  
  \item Otherwise: you should consider rewording captions or the surrounding text.
  \item Next consider the use of \lstinline!\FloatBarrier!
  \item Then consider the option \verb=!=.
  \item As an emergency measure, you can manually place the figure using the option \verb=H=.
  \item As a last resort, consider using primitive \TeX{} to manually place the figure with respect to the page. This should be the very last step in a publication. 
  \end{enumerate}

  \section{Bad page break}
  Consider using:
  \begin{enumerate}
  \item \lstinline!\pagebreak[1]! at a good/better place for line breaking:
  \item \lstinline!\enlargethispage{@@<n>@@\baselineskip}! or \lstinline!\enlargethispage*{@@<n>@@\baselineskip}! where \lstinline!@@<n>@@! is an integer multiple of $1/4$. 
  \end{enumerate}

  \section{Excessive whitespace between paragraphs}
  This occurs when there is insufficient text to fill a page (the page is \emph{underfull}) but moving text onto another page is not possible because:
  \begin{itemize}
    \item A section would be orphaned from its title
    \item A footnote would have to be set on a different page from its mark. 
  \end{itemize}


  \begin{enumerate}
  \item Reposition floats if useful.
  \item Use \lstinline!\oneraggedpage!:
  \begin{lstlisting}
% one page ragged bottom
\makeatletter
\newcommand{\oneraggedpage}{\let\mytextbottom\@textbottom
  \let\mytexttop\@texttop
  \raggedbottom
  \afterpage{%
  \global\let\@textbottom\mytextbottom
  \global\let\@texttop\mytexttop}}
  \end{lstlisting}
  \item Finally, use \lstinline!\raggedbottom! on the entire document. Review.

  \section{Hyphenation}
  Hyphenation can be distracting and interrupt the text; however, the alternative to hyphenation is often worse.

  When the text is typeset ragged right, \LaTeX{} will actually be \emph{more} inclined to hyphenate. 
  If full-width justification on a paragraph can be used, it will minimize discretionary hyphens. 

  \LaTeX{} will, by default, avoid hyphenating words, and desperately try to avoid putting discretionary hyphens on consecutive lines or at a page break.

  \begin{center}
  \textbf{\textsf{If a paragraph in your report contains unsightly hyphenation (\ie\ consecutive hyphens or hyphenation across pages), the best and perhaps only solution is to reword the paragraph.}}
  \end{center}

  There is one exception. The command 
  \begin{lstlisting}
  \setlength{\overviewExtra}{1mm}
  \end{lstlisting}

  will add $1$\,mm extra to the nominal column width in the overview. Try values from $-4$\,mm to $4$\,mm to minimize hyphenations. 

  In the unlikely event that rewording the paragraph does not change the hyphenation, you can increase \lstinline!\emergencystretch! to \lstinline!0.5em!. 
  Note that you in doing so are take responsibility for the typesetting of that paragraph. 
  You may wish to play around with penalties, but you should do so with trepidation and only ever locally.

  Never use \lstinline!\raggedright! in ordinary body text. It is acceptable in text where each ``paragraph'' is really an isolated verse or element. 
  For example, it is acceptable in a list of recommendations, in a table, or in the captions to figures. 
  Although in deploying \lstinline!\raggedright! you win certainly the battle regarding excessive hyphenation, you lose the war -- the text can become badly ragged -- and paragraphs will need to be reworded. 

  \end{enumerate}

\appendix
\newgeometry{left=0.125cm,right=0.25cm,top=1cm,bottom=1cm}
\begin{longtable}{@{\texttt{\textbackslash}}>{\ttfamily}l>{\raggedright}p{0.55\textwidth}l}
\caption{List of all commands} \\
    \toprule
    \textbf{Command} & \textbf{Comment} & \textbf{Group} \\
    \midrule
    \endhead
    boxsources & Source matter within boxes & Boxes \\[5pt]
    citetitle & Inserts the title of a citation, as well as including the reference in the bibliography. & Citations \& bibliography \\
    footcite & Citation to be placed in a footnote & Citations \& bibliography \\
    footcites & Multiple citations to be placed in a footnote & Citations \& bibliography \\
    footnote & Insert a footnote. & Citations \& bibliography \\
    textcite & Inline citation & Citations \& bibliography \\
    textcites & Multiple citations to be placed inline & Citations \& bibliography \\[5pt]
    Vref  & Initial cross-reference (to a \textbackslash{}label) & Cross-referencing \\
    Cref  & Subsequent cross-reference (to a \textbackslash{}label) & Cross-referencing \\
    label & The target of a cross-reference. & Cross-referencing \\
    phantomsection & If the target of a cross-reference is not a figure, table, or section (\emph{i.e.} it is just text in a paragraph), use \textbackslash{}phantomsection\textbackslash{}label{<key>} to anchor the cross-reference & Cross-referencing \\[30pt] 
    bottomrule & Final horizontal rule in a table & Figures and tables \\
    caption & General caption (grey, bold) & Figures and tables \\
    captionwithunits & Caption with first argument top line and second argument units for chart & Figures and tables \\
    cmidrule & Horizontal rule over a subset of columns & Figures and tables \\
    columnwidth & Supplies the current width of the column  & Figures and tables \\
    %fnotes & Figure notes that are long & Figures and tables \\
    %tnotes & Table notes that are long & Figures and tables \\
    includegraphics & inserts an image (typically a pdf) using the file provided & Figures and tables \\
    linewidth & Current width of line & Figures and tables \\
    midrule & Horizontal rule separating heading from contents in a table & Figures and tables \\
    multicolumn & Spread a cell over multiple columns (merge cells) & Figures and tables \\
    notes & Puts notes under a chart & Figures and tables \\
    source & Puts source text under a chart & Figures and tables \\
    noteswithsource & Puts notes and source under a chart/table & Figures and tables \\ 
    toprule & First horizontal rule in a table & Figures and tables \\
    units & Units for charts & Figures and tables\\[5pt]
    emph  & Emphasize text with an oblique font & Fonts \\
    textbf & Boldface & Fonts \\
    textit & Italic font (oblique font for Arial) & Fonts \\[5pt]
    item  & Commence new number or bullet in an enumerate or itemize environment & Lists \\[5pt]
    ie    & Macro for consistent use of `i.e.' & Misc \\
    input & Used to insert raw .tex code from another file & Misc \\[5pt]
    addchap & Chapter without number & Sections \\
    chapter & Begins a new chapter, first argument the title of the chapter & Sections \\
    section & Section title & Sections \\
    subsection & Subsection title & Sections \\[5pt]
    addbibresource & The path of the bibliography (.bib) file containing the references & Single-use \\
    acknowledgements & Text appearing in second column of page 2 & Single-use \\ 
    author & The authors of the report & Single-use \\
    contentspage & Load after the overview. Prints the table of contents and the list of figures & Single-use \\
    documentclass & Used at the top document. Loads the class (grattan) & Single-use \\
    GrattanReportNumber & Prints the report number on page 2. Use \textbackslash{}GrattanWorkingPaperNumber for working papers & Single-use \\
    %GrattanWorkingPaperNumber & Prints the working paper number on page 2 & Single-use \\
    listoffigures & Print list of figures  & Single-use \\
    listoftables & Prints list of tables & Single-use \\
    printbibliography & Prints bibliography & Single-use \\
    printendnotes & Prints endnotes if requested & Single-use \\
    %printfigurenotes & Prints list of `long figure notes' by \textbackslash{}fnotes & Single-use \\
    %printtablenotes & Prints list of `long table notes' by \textbackslash{}tnotes & Single-use \\
    title & The title of the report & Single-use \\[5pt]
    \$    & \textbackslash{}\$ for a (literal) dollar sign & Special characters \\
    \%    & \textbackslash{}\% for a (literal) percentage sign & Special characters \\
    \&    & Literal ampersand logogram & Special characters \\[5pt]
    ,     & Half-space kern & Technical \\
    @     & Use \textbackslash{}@ before a sentence-ending full stop preceded by a capital letter & Technical \\
    \textbackslash{} & Line break in table & Technical \\
    \bottomrule
    \end{longtable}

\begin{tabular}{>{\ttfamily}lp{0.6\textwidth}}
\toprule
\begin{minipage}[t]{0.4\linewidth}
\begin{verbatim}
\begin{figure}
\Caption{Title}%
{Units}%
{xrefkey}
\includegraphics{path/to/figure}
\notes{Notes}
\source{Source}
\end{verbatim}
\end{minipage} & Places a floating figure with caption, notes, and source. \\[100pt]

\begin{minipage}[t]{0.4\linewidth}
\begin{verbatim}
\begin{table}
\caption{Table caption}
\begin{tabularx}{\linewidth}
\toprule
ColumnHeader1 & ColumnHeader2 \\
\midrule
Table entry 1 & Table entry 2 \\
\bottomrule
\end{tabularx}
\notes{}
\source{}
\end{table}
\end{verbatim}
\end{minipage} & Places a floating table with caption, notes, and source. \\[150pt]

\begin{minipage}[t]{0.4\linewidth}
\begin{verbatim}
\begin{overview}[-25pt]

\end{overview}
\begin{recommendations}[-25pt]

\end{recommendations}
\end{verbatim}
\end{minipage} & Page of overview and recommendations.\\
\bottomrule
\end{tabular}

\restoregeometry


  




  


 
\printindex
\end{document}
